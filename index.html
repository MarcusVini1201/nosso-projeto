import React, { useState, useEffect } from 'react';
import { 
  Shield, HeartPulse, Hammer, Linkedin, Play, 
  FileText, Database, Search, Users, Activity, 
  Zap, Clock, Camera, CheckCircle2, Award, 
  ArrowRight, Scale, Info, Package, ClipboardCheck,
  AlertTriangle, Globe
} from 'lucide-react';

/**
 * SIGB-C v61.0 - WIKI PRIME "EDICAO CDO"
 * Foco: Expansão do Inventário (43 itens) e Gestão de CA (NR-06)
 */

const App = () => {
  const [searchTerm, setSearchTerm] = useState('');
  const [activeTab, setActiveTab] = useState('Inventario');
  const [time, setTime] = useState(new Date().toLocaleTimeString());

  useEffect(() => {
    const timer = setInterval(() => setTime(new Date().toLocaleTimeString()), 1000);
    return () => clearInterval(timer);
  }, []);

  // Base de Dados Expandida - Preparada para os 43 itens
  const inventoryData = [
    { 
      id: 1, 
      cat: 'AHA 2025', 
      title: 'D.E.A (Desfibrilador)', 
      ca: 'N/A (Equipamento)',
      validade: 'Jan/2027',
      manual: 'Ligue o aparelho e siga as instruções de voz. Cole as pás no tórax limpo.',
      video: 'https://youtu.be/n0yZ-45bqYI',
      icon: <HeartPulse className="text-red-500" />,
      image: 'https://images.unsplash.com/photo-1631815589968-fdb09a223b1e?w=400',
      status: 'Operacional'
    },
    { 
      id: 2, 
      cat: 'NR-06', 
      title: 'Luva Isolante 2.5KV', 
      ca: '12.345', // Exemplo de C.A.
      validade: 'Dez/2026',
      manual: 'Proteção elétrica. Verifique furos antes de usar. Use sempre com luva de cobertura.',
      video: 'https://www.youtube.com/results?search_query=uso+luva+isolante+nr10',
      icon: <Zap className="text-blue-400" />,
      image: 'https://images.unsplash.com/photo-1590103512238-e754778f9080?w=400',
      status: 'Em Inspeção'
    },
    { 
      id: 3, 
      cat: 'NT-07', 
      title: 'Extintor PQS 6kg', 
      ca: 'Selo INMETRO',
      validade: 'Out/2026',
      manual: 'Para fogos A, B e C. Rompa o lacre, aponte para a base e aperte o gatilho.',
      video: 'https://www.youtube.com/results?search_query=uso+extintor+pqs',
      icon: <Shield className="text-yellow-500" />,
      image: 'https://images.unsplash.com/photo-1610473538410-664871ca8e47?w=400',
      status: 'Operacional'
    },
    // Placeholders para completar os 43 itens gradualmente
    { 
      id: 4, 
      cat: 'Consumo', 
      title: 'Kit Ataduras (Diversas)', 
      ca: 'Reg. ANVISA',
      validade: 'Mai/2028',
      manual: 'Utilizar para imobilização de talas ou compressão de curativos.',
      video: '#',
      icon: <Package className="text-slate-400" />,
      image: 'https://images.unsplash.com/photo-1584036561566-baf8f5f1b144?w=400',
      status: 'Estoque Baixo'
    }
  ];

  const filteredItems = inventoryData.filter(item => 
    item.title.toLowerCase().includes(searchTerm.toLowerCase()) || 
    item.cat.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <div className="min-h-screen bg-[#020301] text-slate-100 font-sans antialiased selection:bg-yellow-500/30">
      
      {/* HEADER TÁTICO */}
      <nav className="border-b border-[#1a220f] bg-[#040602]/95 backdrop-blur-md sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-8 h-20 flex justify-between items-center">
          <div className="flex items-center gap-6">
            <div className="w-12 h-12 bg-[#facc15] rounded-2xl flex items-center justify-center font-black text-black text-2xl shadow-[0_0_20px_rgba(250,204,21,0.4)]">M</div>
            <div className="hidden md:flex flex-col">
              <span className="text-[10px] font-black tracking-[0.4em] text-[#facc15] uppercase italic">SIGB-C v61.0 // LOGÍSTICA</span>
              <span className="text-white font-black text-lg uppercase tracking-tighter">REINO DA CIÊNCIA</span>
            </div>
          </div>
          
          <div className="flex items-center gap-8">
            <div className="hidden lg:flex flex-col items-end border-r border-white/10 pr-8">
              <span className="text-[9px] font-black text-slate-500 uppercase tracking-widest">Posto de Comando</span>
              <span className="text-xs font-bold text-white uppercase italic">CIOB - BRASÍLIA</span>
            </div>
            <div className="flex items-center gap-3 text-[#facc15] font-mono">
              <Clock size={16} />
              <span className="text-sm font-black">{time}</span>
            </div>
          </div>
        </div>
      </nav>

      <main className="max-w-7xl mx-auto px-8 py-12">
        
        {/* DASHBOARD DE NAVEGAÇÃO */}
        <div className="flex flex-col md:flex-row md:items-end justify-between gap-8 mb-16">
          <div>
            <h2 className="text-5xl md:text-7xl font-black italic uppercase text-white tracking-tighter leading-none">
              Gestão de <span className="text-[#facc15]">Ativos</span>
            </h2>
            <p className="text-slate-500 text-sm uppercase font-black tracking-[0.3em] mt-4 italic">Monitoramento de C.A. e Validades</p>
          </div>
          
          <div className="flex bg-white/5 p-2 rounded-3xl border border-white/5 backdrop-blur-sm">
            {[
              { id: 'Inventario', icon: <Package size={14}/>, label: 'Inventário' },
              { id: 'Compliance', icon: <Scale size={14}/>, label: 'C.A. (NR-06)' },
              { id: 'Mapa', icon: <Globe size={14}/>, label: 'Postos' }
            ].map(tab => (
              <button 
                key={tab.id} 
                onClick={() => setActiveTab(tab.id)}
                className={`flex items-center gap-2 px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${activeTab === tab.id ? 'bg-[#facc15] text-black shadow-lg shadow-[#facc15]/20' : 'text-slate-500 hover:text-white'}`}
              >
                {tab.icon} {tab.label}
              </button>
            ))}
          </div>
        </div>

        {/* PESQUISA */}
        <div className="relative mb-12 max-w-xl">
          <Search className="absolute left-6 top-1/2 -translate-y-1/2 text-slate-600" size={20} />
          <input 
            type="text" 
            placeholder="PROCURAR ITEM OU C.A. ESPECÍFICO..." 
            className="w-full bg-[#080a05] border border-[#1a220f] rounded-2xl pl-16 pr-8 py-5 text-xs font-black uppercase tracking-widest text-white focus:border-[#facc15]/40 outline-none transition-all"
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
        </div>

        {activeTab === 'Inventario' && (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-700">
            {filteredItems.map(item => (
              <div key={item.id} className="group bg-[#080a05] rounded-[2.5rem] border border-[#1a220f] overflow-hidden hover:border-[#facc15]/20 transition-all duration-500">
                <div className="aspect-video relative overflow-hidden bg-black">
                  <img src={item.image} alt={item.title} className="w-full h-full object-cover opacity-30 group-hover:opacity-60 transition-opacity duration-700" />
                  <div className="absolute top-4 left-4 bg-black/60 backdrop-blur-md px-3 py-1 rounded-lg border border-white/10 flex items-center gap-2">
                    <Camera size={12} className="text-[#facc15]" />
                    <span className="text-[8px] font-black uppercase tracking-widest text-white italic">Foto Autoral Marcus</span>
                  </div>
                  <div className={`absolute bottom-4 right-4 px-3 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest border ${item.status === 'Operacional' ? 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30' : 'bg-amber-500/20 text-amber-400 border-amber-500/30'}`}>
                    {item.status}
                  </div>
                </div>

                <div className="p-8">
                  <div className="flex justify-between items-start mb-6">
                    <div className="p-3 bg-white/5 rounded-xl text-[#facc15]">
                      {item.icon}
                    </div>
                    <div className="text-right">
                      <span className="text-[9px] font-black text-slate-600 uppercase tracking-widest block">{item.cat}</span>
                      <span className="text-[10px] font-black text-[#facc15] uppercase italic">Validade: {item.validade}</span>
                    </div>
                  </div>

                  <h3 className="text-xl font-black italic text-white uppercase tracking-tighter mb-4">{item.title}</h3>
                  
                  <div className="space-y-4 mb-8">
                    <div className="bg-white/5 p-4 rounded-xl border border-white/5">
                      <p className="text-[10px] text-slate-400 font-medium leading-relaxed italic">"{item.manual}"</p>
                    </div>
                    <div className="flex justify-between text-[9px] font-black uppercase text-slate-500 border-t border-white/5 pt-4">
                      <span>C.A. / REGISTRO:</span>
                      <span className="text-white">{item.ca}</span>
                    </div>
                  </div>

                  <button className="w-full bg-[#1a220f] py-4 rounded-xl flex items-center justify-center gap-3 hover:bg-white hover:text-black transition-all">
                    <Play size={14} fill="currentColor" />
                    <span className="text-[9px] font-black uppercase tracking-widest">Ver Treinamento</span>
                  </button>
                </div>
              </div>
            ))}
          </div>
        )}

        {activeTab === 'Compliance' && (
          <div className="bg-[#080a05] rounded-[3rem] border border-[#1a220f] p-12 animate-in zoom-in-95 duration-500">
            <div className="flex items-center gap-4 mb-10">
              <Scale className="text-[#facc15]" size={32} />
              <h3 className="text-3xl font-black text-white uppercase tracking-tighter italic">Relatório de C.A. (NR-06)</h3>
            </div>
            
            <div className="overflow-x-auto">
              <table className="w-full text-left">
                <thead>
                  <tr className="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-[#1a220f]">
                    <th className="pb-6">Equipamento</th>
                    <th className="pb-6 text-center">Nº do C.A.</th>
                    <th className="pb-6 text-center">Vencimento</th>
                    <th className="pb-6 text-right">Status Legal</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-[#1a220f]">
                  {inventoryData.filter(i => i.ca !== 'N/A (Equipamento)').map(i => (
                    <tr key={i.id} className="text-xs group hover:bg-white/5 transition-colors">
                      <td className="py-6 font-bold text-white uppercase italic">{i.title}</td>
                      <td className="py-6 text-center font-mono text-[#facc15]">{i.ca}</td>
                      <td className="py-6 text-center text-slate-400">{i.validade}</td>
                      <td className="py-6 text-right">
                        <span className="px-3 py-1 bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 rounded-full text-[9px] font-black">VALIDADO</span>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
            
            <div className="mt-12 p-8 bg-amber-500/5 rounded-2xl border border-amber-500/20 flex gap-4">
              <AlertTriangle className="text-amber-500 shrink-0" />
              <p className="text-xs text-amber-200/70 italic">
                <strong>Nota do Comandante:</strong> Todos os EPIs sem C.A. legível ou com data de validade vencida devem ser retirados de uso imediatamente, conforme a <strong>NR-06</strong>. Este módulo serve para auditoria em caso de fiscalização no CIOB.
              </p>
            </div>
          </div>
        )}

        {activeTab === 'Mapa' && (
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8 animate-in slide-in-from-right-8 duration-700">
             {[
               { posto: 'CIOB - SEDE', cidade: 'Brasília', desc: 'Centro de Operações Integradas' },
               { posto: 'UNDF', cidade: 'Águas Claras', desc: 'Unidade de Ensino e Recreação' },
               { posto: 'HOSP. CEILÂNDIA', cidade: 'Ceilândia', desc: 'Posto de Atendimento de Saúde' }
             ].map((p, i) => (
               <div key={i} className="bg-[#080a05] p-8 rounded-3xl border border-[#1a220f] hover:border-[#facc15]/30 transition-all cursor-pointer">
                  <div className="w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-[#facc15] mb-6">
                    <Globe size={20} />
                  </div>
                  <h4 className="text-xl font-black text-white uppercase italic mb-2">{p.posto}</h4>
                  <p className="text-[10px] text-[#facc15] font-black uppercase mb-4 tracking-widest">{p.cidade}</p>
                  <p className="text-xs text-slate-500 italic mb-6">"{p.desc}"</p>
                  <button className="flex items-center gap-2 text-[10px] font-black uppercase text-white hover:gap-4 transition-all">
                    Ver Protocolo Local <ArrowRight size={14} className="text-[#facc15]" />
                  </button>
               </div>
             ))}
          </div>
        )}

      </main>

      <footer className="py-20 text-center opacity-30 border-t border-[#1a220f] mt-20">
         <p className="text-sm text-slate-600 font-black uppercase tracking-[1.5em] mb-4">
            MARCUS VINÍCIUS • CDO & GENERAL
         </p>
         <div className="flex justify-center gap-8">
            <Linkedin size={20} className="hover:text-[#facc15] cursor-pointer" />
            <Award size={20} className="hover:text-[#facc15] cursor-pointer" />
         </div>
      </footer>

      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #020301; }
      `}</style>
    </div>
  );
};

export default App;
